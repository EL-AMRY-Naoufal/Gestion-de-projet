Annee -> Departement -> Formation -> Niveau -> Semestre -> Modules -> Groupe

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

<!--
<div class="button-container">
  Nouvelle annÃ©e
  <div class="custom-icon plus-button" (click)="openAddAnneeDialog()" title="Show more">Nouvelle annÃ©e â•</div>
</div> -->

<div class="header-container2">
  <!-- <h1 class="page-header2">Liste des annÃ©es</h1> -->
  <div
    class="custom-button2 plus-button2"
    (click)="openAddAnneeDialog()"
    title="Show more"
  >
    +
</div>

<div class="list-container">
<ul class="tree">
  <li *ngFor="let annee of data.annees; let i = index">
    <details>
      <summary (click)="showType('ANNEE', annee)">
        AnnÃ©e: {{ annee.debut || 'Nouvelle AnnÃ©e' }}
        <!-- <button (click)="openAddDepartementDialog(i)">+</button> -->
        <div class="action-icons">
        <div class="custom-icon plus-button" (click)="openAddDepartementDialog(i)" title="Show more">â•</div>
        <div class="custom-icon delete-icon" (click)="removeAnnee(i)" title="Delete user">ğŸ—‘ï¸</div>
        </div>
      </summary>
      <ul>
        <li *ngFor="let departement of annee.departements; let j = index">
          <details>
            <summary (click)="showType('DEPARTEMENT', departement)">
              DÃ©partement: {{ departement.nom || 'Nouveau DÃ©partement' }}
              <!-- <button (click)="openAddFormationDialog(i, j)">+</button> -->
              <!-- <button (click)="removeDepartement(i, j)">ğŸ—‘ï¸</button> -->
              <div class="action-icons">

              <div class="custom-icon plus-button" (click)="openAddFormationDialog(i, j)" title="Show more">â•</div>
              <div class="custom-icon delete-icon" (click)="removeDepartement(i, j)" title="Delete user">ğŸ—‘ï¸</div>
              </div>
            </summary>
            <ul>
              <li *ngFor="let formation of departement.formations; let k = index">
                <details>
                  <summary (click)="showType('FORMATION', formation)">
                    Formation: {{ formation.nom || 'Nouvelle Formation' }}
                    <!-- <button (click)="openAddNiveauDialog(i, j, k)">+</button> -->
                    <!-- <button (click)="removeFormation(i, j, k)">ğŸ—‘ï¸</button> -->
                    <div class="action-icons">

                    <div class="custom-icon plus-button" (click)="openAddNiveauDialog(i, j, k)" title="Show more">â•</div>
                    <div class="custom-icon delete-icon" (click)="removeFormation(i, j, k)" title="Delete user">ğŸ—‘ï¸</div>
                    </div>
                  </summary>
                  <ul>
                    <li *ngFor="let niveau of formation.niveaux; let l = index">
                      <details>
                        <summary (click)="showType('NIVEAU', niveau)">
                          Niveau: {{ niveau.nom || 'Nouveau Niveau' }}
                          <div class="action-icons">

                          <!-- <button (click)="openAddSemestreDialog(i, j, k, l)">â•</button> -->
                          <div class="custom-icon plus-button" (click)="openAddSemestreDialog(i, j, k, l)" title="Show more">â•</div>
                          <!-- <button (click)="removeNiveau(i, j, k, l)">ğŸ—‘ï¸</button> -->
                          <div class="custom-icon delete-icon" (click)="removeNiveau(i, j, k, l)" title="Delete user">ğŸ—‘ï¸</div>

                          </div>
                        </summary>
                        <ul>
                          <li *ngFor="let semestre of niveau.semestres; let n = index">
                            <details>
                              <summary (click)="showType('SEMESTRE', semestre)">
                                Semestre: {{ semestre.nom || 'Nouveau Semestre' }}
                                <!-- <button (click)="openAddModuleDialog(i, j, k, l, n)">+</button> -->
                                <!-- <button (click)="removeSemestre(i, j, k, l, n)">ğŸ—‘ï¸</button> -->
                                <div class="action-icons">

                                <div class="custom-icon plus-button" (click)="openAddModuleDialog(i, j, k, l, n)" title="Show more">â•</div>
                                <div class="custom-icon delete-icon" (click)="removeSemestre(i, j, k, l, n)" title="Delete user">ğŸ—‘ï¸</div>
                                </div>
                              </summary>
                              <ul>
                                <li *ngFor="let module of semestre.modules; let o = index">
                                  <details>
                                    <summary (click)="showType('MODULE', module)">
                                      Module: {{ module.nom || 'Nouveau Module' }}
                                      <!-- <button (click)="openAddGroupeDialog(i, j, k, l, n, o)">+</button> -->
                                      <!-- <button (click)="removeModule(i, j, k, l, n, o)">ğŸ—‘ï¸</button> -->
                                      <div class="action-icons">

                                      <div class="custom-icon plus-button" (click)="openAddGroupeDialog(i, j, k, l, n, o)" title="Show more">â•</div>
                                      <div class="custom-icon delete-icon" (click)="removeModule(i, j, k, l, n, o)" title="Delete user">ğŸ—‘ï¸</div>
                                      </div>
                                    </summary>
                                    <ul>
                                      <li *ngFor="let groupe of module.groupes; let p = index">
                                        <details>
                                          <summary (click)="showType('GROUPE', groupe)">
                                            {{ groupe.nom || 'Nouveau Groupe' }} ({{ groupe.heuresAffectees  }} / {{groupe.totalHeuresDuGroupe}} heures)
                                            <!-- <button (click)="openAddAffectationDialog(i, j, k, l, n, o, p)"></button> -->
                                            <!-- <button (click)="removeGroupe(i, j, k, l, n, o, p)">ğŸ—‘ï¸</button> -->
                                            <div class="action-icons">

                                            <div class="custom-icon plus-button" (click)="openAddAffectationDialog(i, j, k, l, n, o, p)" title="Show more">â•</div>
                                            <div class="custom-icon delete-icon" (click)="removeGroupe(i, j, k, l, n, o, p)" title="Delete user">ğŸ—‘ï¸</div>
                                            </div>

                                          </summary>

                                          <div *ngIf="groupe.affectations && groupe.affectations.length > 0">
                                            <div *ngFor="let affectation of groupe.affectations; let q = index" class="affectation-row">
                                              <div class="affectation-info">
                                                <p><strong></strong>
                                                  <a *ngIf="affectation.enseignant?.user" (click)="navigateToAffectations(affectation.enseignant?.user)">
                                                    {{ affectation.nomEnseignant }}
                                                  </a>
                                                </p>

                                                <!-- Input des heures assignÃ©es -->
                                                <input type="number" [(ngModel)]="affectation.heuresAssignees" min="0" class="heures-input">

                                                <!-- Icone de mise Ã  jour -->
                                                <i class="fa-solid fa-repeat"
                                                   style="color: blue;margin-left: 0.2cm ;; margin-right: 0.4cm; cursor: pointer;"
                                                   (click)="updateAffectation(i, j, k, l, n, o, p, q, affectation.heuresAssignees)">
                                                </i>

                                                <!-- Icone de suppression -->
                                                <div class="custom-icon delete-icon"
                                                   (click)="removeAffectation(i, j, k, l, n, o, p, q)">ğŸ—‘ï¸
                                                </div>

                                              </div>
                                            </div>
                                          </div>

                                        </details>
                                      </li>
                                    </ul>


                                  </details>
                                </li>
                              </ul>
                            </details>
                          </li>
                        </ul>
                      </details>
                    </li>
                  </ul>
                </details>
              </li>
            </ul>
          </details>
        </li>
      </ul>
    </details>
  </li>
</ul>
</div>

